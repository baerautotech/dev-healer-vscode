#!/usr/bin/env bash
set -euo pipefail

# Repo-managed git hook (core.hooksPath=.githooks)
# Delegates to pre-commit so push-impact classification stays repo-tracked.
#
# Git provides: $1=remote name, $2=remote url, plus refs on stdin.
# We intentionally ignore stdin because our current pre-push checks are informational.

ROOT="$(git rev-parse --show-toplevel 2>/dev/null || pwd)"
cd "$ROOT"

if command -v pre-commit >/dev/null 2>&1; then
  pre-commit run --hook-stage pre-push
else
  echo "⚠️  pre-commit not found; skipping pre-push checks." >&2
fi
